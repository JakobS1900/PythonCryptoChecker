{% extends "base.html" %}

{% block title %}Universal Converter - CryptoChecker v3{% endblock %}

{% block content %}
<!-- Converter Header -->
<div class="row mb-4">
    <div class="col-12">
        <div class="card-modern" style="background: linear-gradient(135deg, rgba(59, 130, 246, 0.1) 0%, rgba(37, 99, 235, 0.05) 100%); border-color: var(--info); padding: var(--space-8);">
            <div class="row align-items-center">
                <div class="col-md-8">
                    <h1 style="font-size: var(--text-4xl); font-weight: var(--font-bold); color: var(--text-primary); margin-bottom: var(--space-3);">
                        <i class="bi bi-arrow-left-right" style="color: var(--info);"></i>
                        Universal Currency Converter
                    </h1>
                    <p style="font-size: var(--text-lg); color: var(--text-secondary); margin: 0;">
                        Convert between cryptocurrencies and fiat currencies with real-time rates.
                    </p>
                </div>
                <div class="col-md-4 text-md-end">
                    <div class="d-flex flex-column align-items-md-end gap-2">
                        <div class="badge-modern badge-modern-success" style="font-size: var(--text-sm); padding: var(--space-2) var(--space-4);">
                            <i class="bi bi-clock"></i> Real-Time Rates
                        </div>
                        <div class="badge-modern badge-modern-info" style="font-size: var(--text-sm); padding: var(--space-2) var(--space-4);">
                            50+ Currencies
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Main Converter -->
<div class="row justify-content-center mb-4">
    <div class="col-lg-8">
        <div class="card-modern" style="padding: var(--space-8);">
            <form id="converter-form">
                <!-- Amount and From Currency -->
                <div class="row mb-4">
                    <div class="col-md-8">
                        <label for="amount" class="form-label-modern">Amount</label>
                        <input type="number" class="form-control-modern" id="amount" style="font-size: var(--text-lg); padding: var(--space-4);"
                               placeholder="Enter amount" step="any" min="0" required>
                    </div>
                    <div class="col-md-4">
                        <label for="from-currency" class="form-label-modern">From</label>
                        <select class="form-control-modern" id="from-currency" style="font-size: var(--text-lg); padding: var(--space-4);" required>
                            <option value="">Select currency...</option>
                            <!-- Options will be populated dynamically by converter.js -->
                        </select>
                    </div>
                </div>

                <!-- Swap Button -->
                <div class="text-center mb-4">
                    <button type="button" class="btn-modern btn-modern-secondary btn-modern-lg" id="swap-currencies">
                        <i class="bi bi-arrow-down-up"></i> Swap
                    </button>
                </div>

                <!-- Result and To Currency -->
                <div class="row mb-4">
                    <div class="col-md-8">
                        <label for="result" class="form-label-modern">Result</label>
                        <input type="text" class="form-control-modern" id="result" style="font-size: var(--text-lg); padding: var(--space-4); font-weight: var(--font-semibold); color: var(--success);"
                               placeholder="Conversion result" readonly>
                    </div>
                    <div class="col-md-4">
                        <label for="to-currency" class="form-label-modern">To</label>
                        <select class="form-control-modern" id="to-currency" style="font-size: var(--text-lg); padding: var(--space-4);" required>
                            <option value="">Select currency...</option>
                            <!-- Options will be populated dynamically by converter.js -->
                        </select>
                    </div>
                </div>

                <!-- Convert Button -->
                <div class="d-grid">
                    <button type="submit" class="btn-modern btn-modern-primary btn-modern-lg">
                        <i class="bi bi-arrow-left-right"></i> Convert Now
                    </button>
                </div>
            </form>

                <!-- Conversion Details -->
                <div id="conversion-details" class="mt-4" style="display: none;">
                    <div class="converter-result">
                        <div class="row text-center">
                            <div class="col-md-6">
                                <div class="conversion-rate" id="conversion-rate">
                                    1 BTC = $45,000 USD
                                </div>
                                <div class="text-muted">Exchange Rate</div>
                            </div>
                            <div class="col-md-6">
                                <div class="conversion-rate" id="conversion-type">
                                    Crypto to Fiat
                                </div>
                                <div class="text-muted">Conversion Type</div>
                            </div>
                        </div>
                        <div class="text-center mt-3">
                            <small class="text-muted">
                                <i class="bi bi-clock"></i> Updated: <span id="last-updated">Just now</span>
                            </small>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Popular Conversions -->
<div class="row mb-4">
    <div class="col-12">
        <div class="card-modern" style="padding: 0; overflow: hidden;">
            <div style="background: var(--bg-tertiary); padding: var(--space-5); border-bottom: 1px solid var(--border-subtle);">
                <h5 style="margin: 0; font-size: var(--text-lg); font-weight: var(--font-semibold); color: var(--text-primary);">
                    <i class="bi bi-star-fill" style="color: var(--warning);"></i> Popular Conversions
                </h5>
            </div>
            <div style="padding: var(--space-6);">
                <div class="row" id="popular-conversions">
                    <div class="col-12 text-center">
                        <div class="spinner-border spinner-border-sm" role="status"></div>
                        <span style="color: var(--text-secondary); margin-left: var(--space-3);">Loading popular conversions...</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Conversion History -->
<div class="row mb-4">
    <div class="col-12">
        <div class="card-modern" style="padding: 0; overflow: hidden;">
            <div style="background: var(--bg-tertiary); padding: var(--space-5); border-bottom: 1px solid var(--border-subtle); display: flex; justify-content: space-between; align-items: center;">
                <h5 style="margin: 0; font-size: var(--text-lg); font-weight: var(--font-semibold); color: var(--text-primary);">
                    <i class="bi bi-clock-history"></i> Recent Conversions
                </h5>
                <button class="btn-modern btn-modern-secondary btn-modern-sm" onclick="Converter.clearHistory()">
                    <i class="bi bi-trash"></i> Clear
                </button>
            </div>
            <div style="padding: var(--space-6);">
                <div id="conversion-history">
                    <p style="color: var(--text-muted); text-align: center; margin: 0;">No conversions yet. Try converting some currencies!</p>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Supported Currencies -->
<div class="row">
    <div class="col-md-6 mb-4">
        <div class="card-modern" style="padding: 0; overflow: hidden;">
            <div style="background: var(--bg-tertiary); padding: var(--space-5); border-bottom: 1px solid var(--border-subtle);">
                <h5 style="margin: 0; font-size: var(--text-lg); font-weight: var(--font-semibold); color: var(--text-primary);">
                    <i class="bi bi-currency-bitcoin" style="color: var(--warning);"></i> Supported Cryptocurrencies
                </h5>
            </div>
            <div style="padding: var(--space-6);">
                <div id="supported-crypto" style="font-size: var(--text-sm);">
                    <div class="text-center">
                        <div class="spinner-border spinner-border-sm" role="status"></div>
                        <span style="color: var(--text-secondary); margin-left: var(--space-3);">Loading cryptocurrencies...</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="col-md-6 mb-4">
        <div class="card-modern" style="padding: 0; overflow: hidden;">
            <div style="background: var(--bg-tertiary); padding: var(--space-5); border-bottom: 1px solid var(--border-subtle);">
                <h5 style="margin: 0; font-size: var(--text-lg); font-weight: var(--font-semibold); color: var(--text-primary);">
                    <i class="bi bi-cash-stack" style="color: var(--success);"></i> Supported Fiat Currencies
                </h5>
            </div>
            <div style="padding: var(--space-6);">
                <div id="supported-fiat" style="font-size: var(--text-sm);">
                    <div class="text-center">
                        <div class="spinner-border spinner-border-sm" role="status"></div>
                        <span style="color: var(--text-secondary); margin-left: var(--space-3);">Loading fiat currencies...</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script src="{{ url_for('static', path='/js/converter.js') }}"></script>
{% endblock %}

{% block page_init %}
// Converter will auto-initialize when DOM is ready
{% endblock %}