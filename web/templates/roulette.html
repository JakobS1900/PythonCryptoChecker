{% extends "base.html" %}

{% block title %}Roulette | CryptoGaming{% endblock %}

{% block styles %}
<link href="{{ url_for('static', filename='css/roulette.css') }}" rel="stylesheet">
{% endblock %}

{% block content %}
<div class="game-container">
    <!-- Game Header -->
    <div class="game-header">
        <div class="balance-display">
            <i class="fas fa-gem"></i>
            <span id="user-balance">{{ session['gems'] }} GEM</span>
        </div>
        <div class="game-info">
            <span id="game-id">Game #{{ game_id }}</span>
            <button id="sound-toggle" class="icon-btn">
                <i class="fas fa-volume-up"></i>
            </button>
        </div>
    </div>

    <!-- Timer Bar -->
    <div class="timer-container">
        <div class="timer-bar">
            <div class="timer-progress"></div>
            <span class="timer-text">20s</span>
        </div>
    </div>

    <!-- Roulette Display -->
    <div class="roulette-display">
        <div class="previous-rolls" id="previous-rolls">
            <!-- Previous rolls will be added here -->
        </div>
        <div class="wheel-container">
            <div class="wheel-pointer"></div>
            <div class="wheel-numbers" id="wheelNumbers">
                <!-- Numbers will be generated by JS -->
            </div>
        </div>
    </div>

    <!-- Betting Controls -->
    <div class="betting-controls">
        <!-- Bet Amount Section -->
        <div class="bet-amount">
            <h3>Bet Amount</h3>
            <div class="quick-amounts">
                <button class="amount-btn" data-amount="10">10</button>
                <button class="amount-btn" data-amount="50">50</button>
                <button class="amount-btn" data-amount="100">100</button>
                <button class="amount-btn" data-amount="500">500</button>
                <button class="amount-btn" data-amount="1000">1K</button>
            </div>
            <div class="custom-amount">
                <input type="number" id="betAmount" min="1" max="10000" value="10">
                <button id="halfBtn">½</button>
                <button id="doubleBtn">2×</button>
                <button id="maxBtn">Max</button>
            </div>
        </div>

        <!-- Bet Options -->
        <div class="bet-options">
            <!-- Color Bets -->
            <div class="bet-section">
                <div class="bet-row">
                    <button class="bet-btn red" data-type="color" data-value="red">
                        <span class="bet-name">Red</span>
                        <span class="bet-multiplier">2×</span>
                    </button>
                    <button class="bet-btn black" data-type="color" data-value="black">
                        <span class="bet-name">Black</span>
                        <span class="bet-multiplier">2×</span>
                    </button>
                    <button class="bet-btn green" data-type="color" data-value="green">
                        <span class="bet-name">Green</span>
                        <span class="bet-multiplier">14×</span>
                    </button>
                </div>
            </div>

            <!-- Number Groups -->
            <div class="bet-section">
                <div class="bet-row">
                    <button class="bet-btn" data-type="range" data-value="1-18">
                        <span class="bet-name">1-18</span>
                        <span class="bet-multiplier">2×</span>
                    </button>
                    <button class="bet-btn" data-type="parity" data-value="even">
                        <span class="bet-name">Even</span>
                        <span class="bet-multiplier">2×</span>
                    </button>
                    <button class="bet-btn" data-type="parity" data-value="odd">
                        <span class="bet-name">Odd</span>
                        <span class="bet-multiplier">2×</span>
                    </button>
                    <button class="bet-btn" data-type="range" data-value="19-36">
                        <span class="bet-name">19-36</span>
                        <span class="bet-multiplier">2×</span>
                    </button>
                </div>
            </div>

            <!-- Number Grid -->
            <div class="number-grid">
                <!-- Will be populated by JavaScript -->
            </div>
        </div>

        <!-- Active Bets -->
        <div class="active-bets">
            <h3>Your Active Bets</h3>
            <div class="bets-list" id="betsList"></div>
            <div class="bets-summary">
                <div class="total-bet">
                    Total Bet: <span id="totalBet">0 GEM</span>
                </div>
                <div class="potential-win">
                    Potential Win: <span id="potentialWin">0 GEM</span>
                </div>
            </div>
            <div class="bet-actions">
                <button id="clearBets" class="action-btn clear">Clear All</button>
                <button id="spinWheel" class="action-btn spin">Place Bets</button>
            </div>
        </div>
    </div>
</div>

<!-- History Panel -->
<div class="history-panel">
    <h3>Previous Results</h3>
    <div class="rolls-history" id="rollsHistory">
        <!-- History will be populated by JavaScript -->
    </div>
</div>
{% endblock %}

{% block scripts %}
<!-- Socket.IO -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.0.1/socket.io.js"></script>
<!-- Font Awesome -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/js/all.min.js"></script>
<!-- Game script -->
<script src="{{ url_for('static', filename='js/roulette.js') }}"></script>
{% endblock %}
